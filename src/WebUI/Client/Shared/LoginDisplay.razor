@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.AspNetCore.Components.WebAssembly.Authentication
@inject NavigationManager Navigation

<MudDrawerContainer>
    <AuthorizeView>
        <Authorized>
            <MudCard Elevation="0">
                <MudCardHeader>
                    <CardHeaderAvatar>
                        <MudAvatar Color="Color.Info" Variant="Variant.Outlined">
                            @context.User.Identity?.Name?[..1]
                        </MudAvatar>
                    </CardHeaderAvatar>
                    <CardHeaderContent>
                        <MudText Typo="Typo.h6">Hello</MudText>
                        <MudLink Typo="Typo.body1" Href="authentication/profile">
                            @context.User.Identity?.Name
                        </MudLink>
                    </CardHeaderContent>
                    <CardHeaderActions>
                        <MudTooltip Text="Log out">
                            <MudIconButton Icon="@Icons.Material.Filled.Logout" Color="Color.Inherit"
                                           Edge="Edge.Start" OnClick="BeginLogOut"/>
                        </MudTooltip>
                    </CardHeaderActions>
                </MudCardHeader>
            </MudCard>
        </Authorized>
        <NotAuthorized>
            <MudTooltip Text="Register">
                <MudIconButton Icon="@Icons.Material.Filled.AppRegistration" Color="Color.Inherit" Href="authentication/register"/>
            </MudTooltip>
            <MudTooltip Text="Log in">
                <MudIconButton Icon="@Icons.Material.Filled.Login" Color="Color.Inherit" Href="authentication/login"/>
            </MudTooltip>
        </NotAuthorized>
    </AuthorizeView>
</MudDrawerContainer>

@code
{
    private void BeginLogOut()
    {
        Navigation.NavigateToLogout("authentication/logout");
    }
}